(function(d){var h=d.telerik;var e={"190":".","110":".","188":","};var a=[8,9,37,38,39,40,46,35,36,44];h.textbox=function(i,j){this.element=i;d.extend(this,j);var l=d(".t-input",i);this.enabled=!l.is("[disabled]");var q=new h.stringBuilder();q.cat("[ |").cat(this.groupSeparator).catIf("|"+this.symbol,this.symbol).cat("]");this.replaceRegExp=new RegExp(q.string(),"g");var o=d.browser.msie?"paste":"input";var m=l.attr("value");var p=d("<input />",d.extend({id:l.attr("id")+"-text",name:l.attr("name")+"-text",value:(m||this.enabled?this.text:""),"class":l.attr("class"),style:l.attr("style")},this.inputAttributes));if(this.enabled){p.attr("disabled",true)}p.bind({blur:h.delegate(this,this.blur),focus:h.delegate(this,this.focus),keydown:h.delegate(this,this.keydown),keypress:h.delegate(this,this.keypress),change:function(r){r.stopPropagation();return false}}).bind(o,h.delegate(this,this[o])).insertBefore(l);l.hide().appendTo(i);var k=d(".t-arrow-up, .t-arrow-down",i).bind({click:h.preventDefault,dragstart:h.preventDefault});this[this.enabled?"enable":"disable"]();this.numFormat=this.numFormat===undefined?this.type.charAt(0):this.numFormat;var n=this.separator;this.step=this.parse(this.step,n);this.val=this.parse(this.val,n);this.minValue=this.parse(this.minValue,n);this.maxValue=this.parse(this.maxValue,n);if(m!=""){this.value(m)}h.bind(this,{change:this.onChange,load:this.onLoad})};h.textbox.prototype={enable:function(){this.enabled=true;var i=d(this.element);var k=i.removeClass("t-state-disabled").find(".t-input").removeAttr("disabled");if(!this.val&&this.val!=0){k.eq(0).val(this.text)}var j=i.find(".t-arrow-up, .t-arrow-down").unbind("mouseup").unbind("mouseout").unbind("dblclick").bind({mouseup:h.delegate(this,this.clearTimer),mouseout:h.delegate(this,this.clearTimer),dblclick:h.delegate(this,this.clearTimer)});d(j[0]).unbind("mousedown").mousedown(d.proxy(function(l){this.updateState();this.stepper(l,1)},this));d(j[1]).unbind("mousedown").mousedown(d.proxy(function(l){this.updateState();this.stepper(l,-1)},this))},disable:function(){this.enabled=false;var i=d(this.element);i.addClass("t-state-disabled").find(".t-input").attr("disabled","disabled").end().find(".t-icon").unbind("mousedown").bind("mousedown",h.preventDefault);if(!this.val&&this.val!=0){i.find(".t-input:first").val("")}},updateState:function(){var i=d("> .t-input:first",this.element).val();if(this.val!=i.replace(this.replaceRegExp,"")){this.parseTrigger(i)}},input:function(l,j){var i=d(j).val();if(i=="-"){return true}var k=this.parse(i,this.separator);if(k||k==0){this.trigger(this.round(k,this.digits))}},paste:function(n,i){var k=d(i);var j=k.val();var l=i.document.selection.createRange().text;var o=window.clipboardData.getData("Text");if(l>0){j=j.replace(l,o)}else{j+=o}var m=this.parse(j,this.separator);if(m||m==0){this.trigger(this.round(m,this.digits))}},focus:function(k,j){this.focused=true;this.updateState();var i=this.formatEdit(this.val);d(j).val(i||(i==0?0:""));if(!d.browser.safari){j.select()}},blur:function(j){var k=d(j.target);this.focused=false;var i=k.val();if(!i&&i!="0"||!this.val&&this.val!=0){this.value(null);k.removeClass("t-state-error").val(this.text||"");return true}else{if(this.inRange(this.val,this.minValue,this.maxValue)){k.removeClass("t-state-error").val(this.format(this.val))}else{k.addClass("t-state-error")}}},keydown:function(n,i){var k=n.keyCode;var l=d(i);var m=this.separator;var j=e[k];if(j){if(j==m&&this.digits>0&&h.caretPos(l[0])!=0&&l.val().indexOf(m)==-1){return true}else{n.preventDefault()}}if(k==8||k==46){setTimeout(h.delegate(this,function(){this.parseTrigger(l.val())}));return true}if(k==38||k==40){this.modifyInput(l,this.step*(k==38?1:-1));return true}if(k==222){n.preventDefault()}},keypress:function(j){var k=d(j.target);var i=j.keyCode||j.which;if(i==0||d.inArray(i,a)!=-1||j.ctrlKey||(j.shiftKey&&i==45)){return true}if(((this.minValue!==null?this.minValue<0:true)&&String.fromCharCode(i)=="-"&&h.caretPos(k[0])==0&&k.val().indexOf("-")==-1)||this.inRange(i,48,57)){setTimeout(h.delegate(this,function(){this.parseTrigger(k.val())}));return true}j.preventDefault()},clearTimer:function(i){clearTimeout(this.timeout);clearInterval(this.timer);clearInterval(this.acceleration)},stepper:function(l,i){if(l.which==1){var j=d(".t-input:first",this.element);var k=this.step;this.modifyInput(j,i*k);this.timeout=setTimeout(h.delegate(this,function(){this.timer=setInterval(h.delegate(this,function(){this.modifyInput(j,i*k)}),80);this.acceleration=setInterval(function(){k+=1},1000)}),200)}},value:function(i){if(arguments.length==0){return this.val}var k=(typeof i===typeof 1)?i:this.parse(i,this.separator);var j=k===null;var l=this.enabled?this.text:"";this.val=k;d(".t-input:last",this.element).val(j?"":this.formatEdit(k));d(".t-input:first",this.element).toggleClass("t-state-error",!this.inRange(this.val,this.minValue,this.maxValue)).val(j?l:this.format(k));return this},modifyInput:function(j,i){var l=this.val;var m=this.minValue;var o=this.maxValue;l=l?l+i:i;l=(m!==null&&l<m)?m:(o!==null&&l>o)?o:l;var k=this.round(l,this.digits);this.trigger(k);var n=this.focused?this.formatEdit(k):this.format(k);j.removeClass("t-state-error").val(n)},formatEdit:function(j){var i=this.separator;if(j&&i!="."){j=j.toString().replace(".",i)}return j},format:function(i){return h.textbox.formatNumber(i,this.numFormat,this.digits,this.separator,this.groupSeparator,this.groupSize,this.positive,this.negative,this.symbol,true)},trigger:function(i){if(this.val!=i){if(h.trigger(this.element,"change",{oldValue:this.val,newValue:i})){return}d(".t-input:last",this.element).val(this.formatEdit(i));this.val=i}},parseTrigger:function(i){this.trigger(this.round(this.parse(i,this.separator),this.digits))},inRange:function(k,i,j){return(i!==null?k>=i:true)&&(j!==null?k<=j:true)},parse:function(i,k){var j=null;if(i||i=="0"){if(typeof i==typeof 1){return i}i=i.replace(this.replaceRegExp,"");if(k&&k!="."){i=i.replace(k,".")}j=parseFloat(i)}return isNaN(j)?null:j},round:function(j,i){if(j||j==0){return parseFloat(j.toFixed(i||2))}return null}};d.fn.tTextBox=function(k){var j=k.type;var i=d.fn.tTextBox.defaults[j];i.digits=h.cultureInfo[j+"decimaldigits"];i.separator=h.cultureInfo[j+"decimalseparator"];i.groupSeparator=h.cultureInfo[j+"groupseparator"];i.groupSize=h.cultureInfo[j+"groupsize"];i.positive=h.cultureInfo[j+"positive"];i.negative=h.cultureInfo[j+"negative"];i.symbol=h.cultureInfo[j+"symbol"];k=d.extend({},i,k);return this.each(function(){var l=d(this);k=d.meta?d.extend({},k,l.data()):k;if(!l.data("tTextBox")){l.data("tTextBox",new h.textbox(this,k));h.trigger(this,"load")}})};var c={val:null,text:"",step:1,inputAttributes:""};d.fn.tTextBox.defaults={numeric:d.extend(c,{minValue:-100,maxValue:100}),currency:d.extend(c,{minValue:0,maxValue:1000}),percent:d.extend(c,{minValue:0,maxValue:100})};d.fn.tTextBox.patterns={numeric:{negative:["(n)","-n","- n","n-","n -"]},currency:{positive:["*n","n*","* n","n *"],negative:["(*n)","-*n","*-n","*n-","(n*)","-n*","n-*","n*-","-n *","-* n","n *-","* n-","* -n","n- *","(* n)","(n *)"]},percent:{positive:["n *","n*","*n"],negative:["-n *","-n*","-*n"]}};if(!h.cultureInfo.numericnegative){d.extend(h.cultureInfo,{currencydecimaldigits:2,currencydecimalseparator:".",currencygroupseparator:",",currencygroupsize:3,currencynegative:0,currencypositive:0,currencysymbol:"$",numericdecimaldigits:2,numericdecimalseparator:".",numericgroupseparator:",",numericgroupsize:3,numericnegative:1,percentdecimaldigits:2,percentdecimalseparator:".",percentgroupseparator:",",percentgroupsize:3,percentnegative:0,percentpositive:0,percentsymbol:"%"})}var g=/[0#?]/;function b(i){return i.split("").reverse().join("")}function f(o,k,r){var l=0,m=0;var q=k.length;var s=o.length;var v=new h.stringBuilder();while(l<q&&m<s&&k.substring(l).search(g)>=0){if(k.charAt(l).match(g)){v.cat(o.charAt(m));m++}else{v.cat(k.charAt(l))}l++}v.catIf(o.substring(m),m<s&&r).catIf(k.substring(l),l<q);var u=b(v.string());if(u.indexOf("#")>-1){var t=u.indexOf("0")}if(t>-1){var n=u.slice(0,t);var p=u.slice(t,u.length);u=n.replace(/#/g,"")+p.replace(/#/g,"0")}else{u=u.replace(/#/g,"")}if(u.indexOf(",")==0){u=u.replace(/,/g,"")}return r?u:b(u)}h.textbox.formatNumber=function(L,o,t,v,j,R,p,r,N,G){if(!o){return L}var Q,H,M,n;var K=L<0;o=o.split(":");o=o.length>1?o[1].replace("}",""):o[0];var m=o.search(g)!=-1;if(m){o=o.split(";");H=o[0];M=o[1];n=o[2];o=(K&&M?M:H).indexOf("%")!=-1?"p":"n"}switch(o){case"d":case"D":return Math.round(L).toString();case"c":case"C":Q="currency";break;case"n":case"N":Q="numeric";break;case"p":case"P":Q="percent";if(!G){L=Math.abs(L)*100}break;default:return L.toString()}var A=function(U,S,T){for(var V=U.length;V<S;V++){U=T?("0"+U):(U+"0")}return U};var J=function(T,V,S){if(j){var U=new RegExp("(-?[0-9]+)([0-9]{"+S+"})");while(U.test(T)){T=T.replace(U,"$1"+V+"$2")}}return T};var F=F||h.cultureInfo;var I=d.fn.tTextBox.patterns;var E;t=t||t===0?t:F[Q+"decimaldigits"];v=v!==E?v:F[Q+"decimalseparator"];j=j!==E?j:F[Q+"groupseparator"];R=R||R==0?R:F[Q+"groupsize"];r=r||r===0?r:F[Q+"negative"];p=p||p===0?p:F[Q+"positive"];N=N||F[Q+"symbol"];var z,k,s;if(m){var D=(K&&M?M:H).split(".");var x=D[0];var B=D.length>1?D[1]:"";var i=h.lastIndexOf(B,"0");var y=h.lastIndexOf(B,"#");var t=(y>i?y:i)+1}var C=Math.pow(10,t);var O=(Math.round(L*C)/C);L=isFinite(O)?O:L;var w=L.toString().split(/e/i);z=w.length>1?parseInt(w[1]):0;w=w[0].split(".");k=w[0];k=K?k.replace("-",""):k;s=w.length>1?w[1]:"";if(z){if(!K){s=A(s,z,false);k+=s.slice(0,z);s=s.substr(z)}else{k=A(k,z+1,true);s=k.slice(z,k.length)+s;k=k.slice(0,z)}}var P=s.length;if(t<1||(m&&i==-1&&P===0)){s=""}else{s=P>t?s.slice(0,t):A(s,t,false)}var l;if(m){if(k==0){k=""}k=f(b(k),b(x),true);k=x.indexOf(",")!=-1?J(k,j,R):k;s=s&&B?f(s,B):"";l=L===0&&n?n:(K&&!M?"-":"")+k+(s.length>0?v+s:"")}else{k=J(k,j,R);I=I[Q];var u=K?I.negative[r]:N?I.positive[p]:null;var q=k+(s.length>0?v+s:"");l=u?u.replace("n",q).replace("*",N):q}return l};d.extend(h.formatters,{number:h.textbox.formatNumber})})(jQuery);